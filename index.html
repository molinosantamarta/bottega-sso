<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>SSO – Tabbar con Lottie</title>
  <style>
    :root{ --bg:#000; --fg:#fff; --muted:#0f0f11; --border:#2c2c2e; --tabh:72px; }
    html,body{height:100%;background:var(--bg)}
    body{margin:0;color:var(--fg);font-family:-apple-system,system-ui,Segoe UI,Roboto,sans-serif}
    main{min-height:100vh;padding:16px 16px calc(var(--tabh) + 20px)}

    [data-view]{display:none}
    [data-view].active{display:block}

    .grid{max-width:860px;margin:0 auto;display:grid;gap:12px}
    @media (min-width:740px){ .grid{grid-template-columns:1fr 1fr} }
    .box{border:1px solid var(--border); border-radius:12px; background:#0b0b0b; min-height:120px;}

    .x-devbox{
      max-width:820px;margin:24px auto 0;padding:18px 20px;
      border:2px dashed #7a7a7a;border-radius:16px;background:#0b0b0b;color:#eaeaea;
      font:14px/1.45 -apple-system,system-ui,Segoe UI,Roboto,sans-serif
    }

    .tabbar{
      position:fixed;left:0;right:0;bottom:0;z-index:10;background:var(--muted);
      border-top:1px solid var(--border);
      padding-bottom:env(safe-area-inset-bottom);
    }
    .tabbar-inner{
      height:var(--tabh);max-width:960px;margin:0 auto;
      display:grid;grid-template-columns:1fr 1fr;align-items:stretch;
    }
    .half{
      display:flex;align-items:center;justify-content:center;gap:8px;
      cursor:pointer;user-select:none;-webkit-tap-highlight-color:transparent;
      color:#cfcfcf;transition:background .15s ease,color .15s ease, box-shadow .15s ease;
      position:relative;
    }
    .half.left{ border-right:1px solid var(--border); }
    .half.right{ border-left:1px solid var(--border); }
    .half[aria-selected="true"]{ color:#fff;background:#161618; box-shadow:0 8px 24px rgba(80,255,150,.15) inset; }

    .label{font:13px/1 -apple-system,system-ui,Segoe UI,Roboto,sans-serif}
  </style>
</head>
<body>
  <main>
    <section id="view-a" data-view class="active">
      <div class="grid">
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
      </div>
    </section>

    <section id="view-b" data-view>
      <div class="x-devbox">
        questa pagina è in fase di sviluppo, verrà rilasciata con la versione 10.0 dell'app nei prossimi aggiornamenti,
        tu non devi fare nulla, appena pronta la vedrai - Pepe.
      </div>
    </section>
  </main>

  <nav class="tabbar" aria-label="Navigazione pagine">
    <div class="tabbar-inner">
      <div class="half left"  data-tab="a" aria-selected="true">
        <div id="lottie-scan" style="width:28px;height:28px"></div>
        <span class="label">Scanner</span>
      </div>
      <div class="half right" data-tab="b" aria-selected="false">
        <div id="lottie-cart" style="width:28px;height:28px"></div>
        <span class="label">Stoccaggio</span>
      </div>
    </div>
  </nav>

  <!-- Lottie Web -->
  <script src="https://unpkg.com/lottie-web/build/player/lottie.min.js"></script>
  <script>
    // carico le animazioni dai file locali
    const scanAnim = lottie.loadAnimation({
      container: document.getElementById('lottie-scan'),
      renderer: 'svg', loop: true, autoplay: true,
      path: './scanner.lotties.json'
    });
    const cartAnim = lottie.loadAnimation({
      container: document.getElementById('lottie-cart'),
      renderer: 'svg', loop: true, autoplay: true,
      path: './shopping cart.lotties.json'
    });

    const VIEWS = ['a','b'];
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    function activate(view){
      if(!VIEWS.includes(view)) view='a';
      $('#view-a').classList.toggle('active', view==='a');
      $('#view-b').classList.toggle('active', view==='b');
      $$('.half').forEach(h => h.setAttribute('aria-selected', h.dataset.tab===view ? 'true' : 'false'));
      // speed up anim attiva, rallenta l’altra
      if(view==='a'){ scanAnim.setSpeed(1.2); cartAnim.setSpeed(0.6); }
      else{ scanAnim.setSpeed(0.6); cartAnim.setSpeed(1.2); }
    }

    document.querySelector('.tabbar-inner').addEventListener('click', e=>{
      const half = e.target.closest('.half'); if(!half) return;
      const t = half.dataset.tab;
      history.replaceState(null,'','#'+t);
      activate(t);
    });

    function onHash(){ activate((location.hash||'#a').slice(1)); }
    window.addEventListener('hashchange', onHash);
    if(!location.hash) history.replaceState(null,'','#a');
    onHash();
  </script>
</body>
</html>
